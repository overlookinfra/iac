<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Puppet Modules with Github Actions | Puppet IAC Team</title>
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="Puppet Modules with Github Actions" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Puppet Modules with Github Actions Current Setup" />
<meta property="og:description" content="Puppet Modules with Github Actions Current Setup" />
<link rel="canonical" href="https://puppetlabs.github.io/iac/docs/GithubActions.html" />
<meta property="og:url" content="https://puppetlabs.github.io/iac/docs/GithubActions.html" />
<meta property="og:site_name" content="Puppet IAC Team" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-09-04T02:17:48+00:00" />
<script type="application/ld+json">
{"description":"Puppet Modules with Github Actions Current Setup","@type":"BlogPosting","url":"https://puppetlabs.github.io/iac/docs/GithubActions.html","headline":"Puppet Modules with Github Actions","datePublished":"2021-09-04T02:17:48+00:00","dateModified":"2021-09-04T02:17:48+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://puppetlabs.github.io/iac/docs/GithubActions.html"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/iac/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://puppetlabs.github.io/iac/feed.xml" title="Puppet IAC Team" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/iac/">Puppet IAC Team</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/iac/docs/">Docs</a><a class="page-link" href="/iac/modules/">Modules</a><a class="page-link" href="/iac/tools/">Tools</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">Puppet Modules with Github Actions</h1>
  </header>

  <div class="post-content">
    <h2 id="puppet-modules-with-github-actions">Puppet Modules with Github Actions</h2>

<h3 id="current-setup">Current Setup</h3>

<p>The following image describes the overall setup that is currently used with each of our supported Puppet modules for pre-release checks and weekly CI runs:
<img src="Github%20Actions%20Architecture.jpg" alt="Github Actions - self-hosted runner configurations" /></p>

<p>Each workflow uses two custom actions defined as <a href="https://github.com/puppetlabs/action-litmus_parallel">Litmus Parallel Action</a> and <a href="https://github.com/puppetlabs/action-litmus_spec">Litmus Spec Action</a> that run on a self-hosted runner on a machine in the internal network.</p>

<p>Using a self-hosted runner, in this case, allows Litmus to have access and provision the resources needed from the internal VMPooler for the release checks (see the provision.yaml of the module) of each module.</p>

<h3 id="flowchart">Flowchart</h3>

<p><img src="Github%20Actions%20Flowchart.jpg" alt="Github Actions - self-hosted runner flowchart with Litmus Actions" /></p>

<p>Each run on the self-hosted runner can be triggered by the team members whenever they do a push to the <code class="language-plaintext highlighter-rouge">release</code> branch of a module. Usually itâ€™s a fast forward from the <code class="language-plaintext highlighter-rouge">master</code> branch before the next release of the module. This definition is controlled by the release workflow you can find in each module repository (<code class="language-plaintext highlighter-rouge">.github/workflows/release.yaml</code>).</p>

<p>The weekly workflow (<code class="language-plaintext highlighter-rouge">.github/workflows/weekly.yaml</code>) has a scheduled trigger that will run the current <code class="language-plaintext highlighter-rouge">master</code> branch on the self-hosted runner.</p>

  </div>

</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/iac/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Puppet IAC Team</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Puppet IAC Team</li><li><a class="u-email" href="mailto:ia_content@puppet.com">ia_content@puppet.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/puppetlabs"><svg class="svg-icon"><use xlink:href="/iac/assets/minima-social-icons.svg#github"></use></svg> <span class="username">puppetlabs</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Team blog and list of maintained tools by and for the Puppet Infrastructure Automation Content Team.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
